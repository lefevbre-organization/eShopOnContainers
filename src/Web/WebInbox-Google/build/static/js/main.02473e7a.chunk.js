(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a(390)},164:function(e,t,a){},165:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},297:function(e,t,a){},385:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(27),i=a.n(r),o=a(14),c=a(16),l=a(134),d=a(4),u="SIGNED_OUT",p={url:{URL_UPDATE_DEFAULTACCOUNT:"https://lefebvre.westeurope.cloudapp.azure.com:8083/api/v1/accounts/emailuseraccount/updatedefaultaccount",URL_RESET_DEFAULTACCOUNT:"https://lefebvre.westeurope.cloudapp.azure.com:8083/api/v1/accounts/emailuseraccount/resetdefaultaccountbyuser",URL_DELETE_ACCOUNT:"https://lefebvre.westeurope.cloudapp.azure.com:8083/api/v1/accounts/emailuseraccount/deleteaccountbyuserandprovider",URL_SELECT_ACCOUNT:"https://lefebvre.westeurope.cloudapp.azure.com:8087",URL_GET_ACCOUNTS:"https://lefebvre.westeurope.cloudapp.azure.com:8083/api/v1/accounts/emailuseraccount/getbyuser",URL_MF_GOOGLE:"https://lefebvre.westeurope.cloudapp.azure.com:8088/user",URL_MF_OUTLOOK:"https://lefebvre.westeurope.cloudapp.azure.com:8089/user",URL_MF_IMAP:"http://lefebvre.westeurope.cloudapp.azure.com/user",URL_MF_LEXON:"https://lefebvre.westeurope.cloudapp.azure.com:8090/static/js/main.js"}},m="LEXON_USER",g=function(e){return{type:m,payload:e}},h={user:null,userId:null,provider:null,isNewAccount:!1},b=function(e,t){var a="";return a=(a="undefined"===typeof e.parts?e.body.data:f(e.parts,t)).replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,""),decodeURIComponent(escape(window.atob(a)))},f=function e(t,a){for(var n=0;n<t.length;n++){if("undefined"!==typeof t[n].parts)return e(t[n].parts,a);if(t[n].mimeType===a)return t[n].body.data}return""},v=function(e){var t=null;if("string"!==typeof e)return t;var a=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return a&&a.length&&(t=a[1]),t},E=function(e){return new Promise(function(t,a){var n=e.result.labels.map(function(e){return t=e.id,new Promise(function(e,a){window.gapi.client.gmail.users.labels.get({userId:"me",id:t}).then(function(t){return e(t)})});var t});Promise.all(n).then(function(e){return t(e)})})},y=function(e,t){return new Promise(function(a,n){t?window.gapi.client.gmail.users.labels.get({userId:"me",id:t[0]}).then(function(t){return a({messages:e,label:t})}):a({messages:e,label:{result:{messagesTotal:0}}})})},O=function(e){var t=e.labelIds,a=e.maxResults,n=e.pageToken,s=e.q,r=void 0===s?"":s;return new Promise(function(e,s){window.gapi.client.gmail.users.messages.list(Object(d.a)({userId:"me",q:r,maxResults:a||20},t&&{labelIds:t},n&&{pageToken:n})).then(function(t){return e(t)}).catch(function(e){s(e)})})},k=function(e){var t=e.result;return new Promise(function(e,a){var n=(t.messages||[]).map(function(e){return S(e.id)});Promise.all(n).then(function(a){return e(Object(d.a)({},t,{messages:a}))})})},S=function(e){return new Promise(function(t,a){window.gapi.client.gmail.users.messages.get({userId:"me",id:e,format:"metadata",metadataHeaders:["Delivered-To","X-Received","To","Message-ID","Date","Content-Type","MIME-Version","Reply-To","From","Subject","Return-Path"]}).then(function(e){return t(e.result)})})},j=function(e){return new Promise(function(t,a){window.gapi.client.gmail.users.messages.get({userId:"me",id:e,format:"full"}).then(function(e){var a=e.result,n=b(a.payload,"text/html"),s=a.payload.parts;""===n&&(n=(n=b(a.payload,"text/plain")).replace(/(\r\n)+/g,'<br data-break="rn-1">').replace(/[\n\r]+/g,'<br data-break="nr">')),""===n||function(e){var t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.body.childNodes).some(function(e){return 1===e.nodeType})}(n)||(n=n.replace(/(\r\n)+/g,'<div data-break="rn-1" style="margin-bottom:10px"></div>').replace(/[\n\r]+/g,'<br data-break="nr">')),t({body:n,attach:s,headers:e.headers,result:Object(d.a)({},a,{messageHeaders:e.result.payload.headers,payload:void 0})})}).catch(function(e){a(e)})})},C=function(){return function(e){new Promise(function(e,t){window.gapi.client.gmail.users.labels.list({userId:"me"}).then(E).then(function(t){e(t.map(function(e){return e.result}))})}).then(function(t){e({type:"GET_LABELS",payload:t})})}},T=function(e){return function(t){t({type:"SELECT_LABEL",payload:e})}},x={labels:[]},w=a(46),L="ADD_MESSAGE",N="DELETE_MESSAGE",M="DELETE_LIST_MESSAGES",I="ADD_LIST_MESSAGES",_=function(e){var t=e.labelIds,a=(e.q,e.pageToken);return function(e,n){e(F());var s=n().searchQuery;""!==s&&e(T("-1")),function(e){var t=e.labelIds,a=e.maxResults,n=e.q,s=e.pageToken;return new Promise(function(e,r){O({labelIds:t,maxResults:a,pageToken:s,q:n}).then(k).then(function(a){return y(a.messages,t).then(function(t){return e(Object(d.a)({},a,{messages:t.messages,label:t.label}))})}).catch(function(e){r(e)})})}({labelIds:t,maxResults:20,q:s,pageToken:a}).then(function(t){e({type:"GET_MESSAGES",payload:t}),e(P({nextPageToken:t.nextPageToken||""}))}).catch(function(t){e({type:"GET_MESSAGES_FAILED",payload:t})})}},R=function(e){return{type:"SET_SEARCH_QUERY",payload:e}},P=function(e){return{type:"SET_PAGE_TOKENS",payload:e}},A=function(){return{type:"EMPTY_MESSAGES"}},U=function(e,t){return{type:"TOGGLE_SELECTED",payload:{messageIds:e,selected:t}}},D=function(e){return function(t){t(G()),j(e).then(function(e){t({type:"MESSAGE_LOAD_SUCCESS",payload:e})}).catch(function(e){t({type:"MESSAGE_LOAD_FAIL",payload:e})})}},G=function(){return{type:"MESSAGE_LOAD_IN_PROGRESS"}},F=function(){return{type:"GET_MESSAGES_LOAD_IN_PROGRESS"}},B=function(e){return{type:"ADD_INITIAL_PAGE_TOKEN",payload:e}},H=function(){return{type:"CLEAR_PAGE_TOKENS"}},z=function(e){var t=e.ids,a=e.addLabelIds,n=void 0===a?[]:a,s=e.removeLabelIds,r=void 0===s?[]:s;return function(e){(function(e){var t=e.ids,a=e.addLabelIds,n=void 0===a?[]:a,s=e.removeLabelIds,r=void 0===s?[]:s;return new Promise(function(e,a){window.gapi.client.gmail.users.messages.batchModify({userId:"me",ids:t,addLabelIds:n,removeLabelIds:r}).then(function(a){e(t)})})})({ids:t,addLabelIds:n,removeLabelIds:r}).then(function(t){e({type:"MODIFY_MESSAGES_SUCCESS",payload:{modifiedIds:t,addLabelIds:n,removeLabelIds:r}})}).catch(function(t){e({type:"MODIFY_MESSAGES_FAILED"})})}},Q=function(e){return function(t){t({type:L,data:{id:e,content:e}})}},Y=function(e){return function(t){t({type:N,data:{id:e,content:e}})}},V=function(e){return function(t){t({type:M,listMessages:e})}},q=function(e){return function(t){t({type:I,listMessages:e})}},K={messages:[],loading:!0,pageTokens:[]},W={body:"",loading:!1,failed:!1},X={selectedMessages:[]};var Z=Object(c.c)({signedOutReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case u:return{};default:return e}},signInStatusResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_IN_PROGRESS":return Object(d.a)({},e,{status:"AUTH_IN_PROGRESS"});case"AUTH_SUCCESS":return Object(d.a)({},e,{status:"AUTH_SUCCESS",currentUser:t.payload.currentUser});case"AUTH_FAIL":return Object(d.a)({},e,{status:"AUTH_FAIL"});case"SIGNED_IN":return Object(d.a)({},t.payload);case u:return Object(d.a)({},e,{status:"AUTH_SIGNED_OUT",currentUser:{}});default:return e}},lexon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:var a=t.payload,n=a.slice(0,2),s="1"===a.slice(2,3),r=a.slice(3);return Object(d.a)({},e,{user:a,provider:n,isNewAccount:s,userId:r});default:return e}},labelsResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LABELS":return Object(d.a)({},e,{labels:t.payload});case"SELECT_LABEL":return Object(d.a)({},e,{labels:e.labels.map(function(e){return e.id===t.payload?Object(d.a)({},e,{selected:!0}):Object(d.a)({},e,{selected:!1})})});default:return e}},messagesResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGES":var a=Object(d.a)({},e);a.nextPageToken=null;var n=Object(w.a)(a.pageTokens),s=t.payload.nextPageToken;return s&&-1===n.indexOf(s)&&n.push(s),Object(d.a)({},a,t.payload,{loading:!1,pageTokens:n});case"GET_MESSAGES_FAILED":return Object(d.a)({},e,{loading:!1,failed:!0,error:t.payload});case"EMPTY_MESSAGES":return Object(d.a)({},e,{messages:[]});case"GET_MESSAGES_LOAD_IN_PROGRESS":return Object(d.a)({},e,{label:null,nextPageToken:null,loading:!0});case"TOGGLE_SELECTED":return Object(d.a)({},e,{messages:e.messages.map(function(e){return t.payload.messageIds.indexOf(e.id)>-1?Object(d.a)({},e,{selected:t.payload.selected}):e})});case"ADD_INITIAL_PAGE_TOKEN":return Object(d.a)({},e,{pageTokens:[t.payload]});case"CLEAR_PAGE_TOKENS":return Object(d.a)({},e,{pageTokens:[]});case"MODIFY_MESSAGES_SUCCESS":return Object(d.a)({},e,{messages:e.messages.filter(function(e){return-1===t.payload.modifiedIds.indexOf(e.id)})});default:return e}},emailMessageResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGES_LOAD_IN_PROGRESS":case"MESSAGE_LOAD_IN_PROGRESS":return Object(d.a)({},e,{body:"",loading:!0,failed:!1});case"MESSAGE_LOAD_SUCCESS":return Object(d.a)({},e,t.payload,{loading:!1,failed:!1});case"MESSAGE_LOAD_FAIL":return Object(d.a)({},e,{loading:!1,failed:!0,error:t.payload});default:return e}},pageTokens:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{prevPageToken:"",nextPageToken:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE_TOKENS":return Object(d.a)({},e,t.payload);default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_QUERY":return t.payload;default:return e}},messageList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return-1===e.selectedMessages.findIndex(function(e){return e.id===t.data.id})?Object(d.a)({},e,{selectedMessages:[].concat(Object(w.a)(e.selectedMessages),[t.data])}):e;case N:return Object(d.a)({},e,{selectedMessages:e.selectedMessages.filter(function(e){return e.id!==t.data.id})});case M:for(var a=function(a){var n=e.selectedMessages.findIndex(function(e){return e.id===t.listMessages[a]});n>-1&&e.selectedMessages.splice(n,1)},n=0;n<t.listMessages.length;n++)a(n);return Object(d.a)({},e,{selectedMessages:e.selectedMessages});case I:var s=function(a){if(-1===e.selectedMessages.findIndex(function(e){return e.id===t.listMessages[a]})){var n={id:t.listMessages[a],content:t.listMessages[a]};e.selectedMessages.push(n)}};for(n=0;n<t.listMessages.length;n++)s(n);return Object(d.a)({},e,{selectedMessages:e.selectedMessages});default:return e}}}),J=Object(c.e)(Z,Object(c.a)(l.a));J.subscribe(function(){!function(e){var t=JSON.stringify(e);localStorage.setItem("lexon",t)}({lexon:J.getState().lexon})});var $=J,ee=a(20),te=a(32),ae=a(146);te.a.use(ae.a).init({lng:navigator.language,fallbackLng:"en",ns:["isotope"],defaultNS:"isotope",backend:{loadPath:"/assets/locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1},react:{wait:!1,withRef:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default",useSuspense:!1}});var ne=te.a,se=(a(164),a(5)),re=a(6),ie=a(8),oe=a(7),ce=a(9),le=a(394),de=a(396),ue=a(392),pe=a(3),me=(a(165),a(12)),ge=a(11),he=a(391),be=a(138),fe=a.n(be),ve=a(10),Ee=(a(171),a(172),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e)))._handleOnClick=a._handleOnClick.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"_handleOnClick",value:function(e){var t=this.props.lexon.userId;switch(e){case"GOOGLE":window.open("".concat(p.url.URL_MF_GOOGLE,"/GO0").concat(t),"_self");break;case"OUTLOOK":window.open("".concat(p.url.URL_MF_OUTLOOK,"/OU0").concat(t),"_self");break;default:window.open("".concat(p.url.URL_MF_IMAP,"/IM0").concat(t),"_self")}}},{key:"getImage",value:function(e){switch(e){case"GOOGLE":return"/assets/img/logoGoogle.png";case"OUTLOOK":return"/assets/img/logoMicrosoft.png";default:return"/assets/img/logoImap.png"}}},{key:"render",value:function(){var e=this,t=this.props.account;return s.a.createElement("li",null,s.a.createElement("a",{href:"#/",className:"d-flex align-items-center account-text",onClick:function(){return e._handleOnClick(t.provider)}},s.a.createElement("span",null,s.a.createElement("img",{src:this.getImage(t.provider),alt:t.provider})),s.a.createElement("span",null,t.email),s.a.createElement("span",{className:"lf-icon-arrow-exchange"})))}}]),t}(n.Component)),ye=Object(o.b)(function(e){return{lexon:e.lexon}})(Ee),Oe=a(36),ke=a.n(Oe),Se=(a(86),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={dropdownOpen:!1,accounts:[]},a.toggle=a.toggle.bind(Object(pe.a)(a)),a._handleOnClick=a._handleOnClick.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.lexon,t=this;if(e.userId){var a="".concat(p.url.URL_GET_ACCOUNTS,"/").concat(e.userId);fetch(a,{method:"GET"}).then(function(e){return e.json()}).then(function(e){1===e.status?t.setState({accounts:e.result.filter(function(e){return"GOOGLE"!==e.provider})}):console.log("error ->",e.despcription)})}}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"_handleOnClick",value:function(){var e=this.props.lexon.userId;if(null!==e){var t="".concat(p.url.URL_RESET_DEFAULTACCOUNT,"/").concat(e);fetch(t,{method:"GET"}).then(function(){var t="".concat(p.url.URL_SELECT_ACCOUNT,"/user/").concat(e,"/encrypt/0");window.open(t,"_self")}).catch(function(e){console.log("error =>",e)})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.dropdownOpen,n=t.accounts,r=this.props,i=r.picUrl,o=r.fullName,c=r.onSignout,l=r.lexon,d=void 0;return i||(d=o?o.split(/\s/).reduce(function(e,t){return e+t.slice(0,1)},"").substring(0,2):" "),s.a.createElement("div",{className:"menu-user"},s.a.createElement(ve.i,{className:"ml-auto",navbar:!0},s.a.createElement(ve.j,{className:"d-md-down-none"},s.a.createElement(ve.k,{href:"#"},s.a.createElement("i",{className:"icon-location-pin"}))),s.a.createElement(ve.b,{nav:!0,isOpen:a,toggle:this.toggle},s.a.createElement(ve.e,{nav:!0},s.a.createElement("img",{className:"mx-2 profile-pic",src:"assets/img/icon-user.png",alt:o})),s.a.createElement(ve.d,{right:!0,id:"user-box"},s.a.createElement(ve.c,{header:!0,tag:"div",className:"user-image-and-name"},s.a.createElement("span",{className:"dropdown-menu-arrow"}),s.a.createElement("a",{href:"#/",className:"text-right d-block pr-3 pt-3",id:"userInfo","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},s.a.createElement("span",{className:"lf-icon-close",onClick:function(){return e.toggle()}})),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"menu-title mb-5"},s.a.createElement("span",null,te.a.t("menu-user.user"))),s.a.createElement("div",{className:"user-image-and-name text-center"},s.a.createElement("div",{className:"user-image"},s.a.createElement("a",{href:"#/"},void 0===d?s.a.createElement("img",{src:i,alt:o}):s.a.createElement("strong",null,d))),s.a.createElement("span",{className:"user-name"},o),s.a.createElement("span",{className:"company-name"},"Lefebvre-El Derecho, S.A."),s.a.createElement(ke.a,null,s.a.createElement("ul",{className:"other-accounts"},n.map(function(e){return s.a.createElement(ye,{key:e.id,account:e})}))),l.user?s.a.createElement("a",{href:"#/",className:"d-flex align-items-center add-more-accounts",onClick:this._handleOnClick},s.a.createElement("span",{className:"lf-icon-add-round"}),s.a.createElement("strong",null,te.a.t("menu-user.add-other-account"))):null,s.a.createElement("button",{type:"button",className:"col-6 btn btn-primary mt-3 mb-3",onClick:c},te.a.t("menu-user.close-session")))))))))}}]),t}(n.Component)),je=Object(o.b)(function(e){return{lexon:e.lexon}})(Se),Ce=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).handleInputChange=a.handleInputChange.bind(Object(pe.a)(a)),a.handleSearchClick=a.handleSearchClick.bind(Object(pe.a)(a)),a._handleOnClick=a._handleOnClick.bind(Object(pe.a)(a)),a.performSearch=fe()(a.performSearch.bind(Object(pe.a)(a)),1e3),a.toggle=a.toggle.bind(Object(pe.a)(a)),a.toggleMenu=a.toggleMenu.bind(Object(pe.a)(a)),a.state={dropdownOpen:!1,dropdownMenuOpen:!1},a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"_handleOnClick",value:function(e){var t=this.props.lexon.userId;if(null!==t){var a="".concat(p.url.URL_RESET_DEFAULTACCOUNT,"/").concat(t);fetch(a,{method:"GET"}).then(function(){var e="".concat(p.url.URL_SELECT_ACCOUNT,"/user/").concat(t,"/encrypt/0");window.open(e,"_self")}).catch(function(e){console.log("error =>",e)})}}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"toggleMenu",value:function(){this.setState({dropdownMenuOpen:!this.state.dropdownMenuOpen})}},{key:"handleSearchClick",value:function(e){""!==this.props.searhQuery&&this.performSearch()}},{key:"handleInputChange",value:function(e){this.props.setSearchQuery(e.target.value),this.performSearch()}},{key:"performSearch",value:function(){var e={};this.props.searchQuery&&""!==this.props.searchQuery||(e.labelIds=["INBOX"]),this.props.getLabelMessages(Object(d.a)({},e))}},{key:"render",value:function(){var e=this.props.googleUser.w3,t=e.U3,a=e.ig,n=e.Paa;return s.a.createElement("header",{className:"d-flex p-3 align-content-center align-items-center header "},s.a.createElement("div",{className:"justify-content-left"},s.a.createElement(he.a,{to:"/inbox"},s.a.createElement("img",{border:"0",alt:"lefebvre",src:"assets/img/LogoLefebvre.png"}))),s.a.createElement("div",{className:"header-logo justify-content-center"}),s.a.createElement("div",{className:"header-search"},s.a.createElement("div",{className:"input-group w-75 ml-1 mr-auto"},s.a.createElement("input",{type:"search",className:"form-control search",placeholder:"Search mail",value:this.props.searchQuery,onChange:this.handleInputChange}),s.a.createElement("div",{className:"input-group-append",onClick:this.handleSearchClick},s.a.createElement("button",{className:"btn btn-light  bg-white text-dark btn-search",type:"button"},s.a.createElement(me.a,{icon:ge.j})))),s.a.createElement(je,{picUrl:n,email:t,fullName:a,onSignout:this.props.onSignout}),s.a.createElement("div",null,s.a.createElement(ve.i,{className:"ml-auto",navbar:!0},s.a.createElement(ve.j,{className:"d-md-down-none"},s.a.createElement(ve.k,{href:"#"},s.a.createElement("i",{className:"icon-location-pin"}))),s.a.createElement(ve.b,{nav:!0,isOpen:this.state.dropdownMenuOpen,toggle:this.toggleMenu},s.a.createElement(ve.e,{nav:!0},s.a.createElement("img",{src:"assets/img/icon-products.png",alt:""})),s.a.createElement(ve.d,{right:!0},s.a.createElement(ve.c,null,s.a.createElement("span",{onClick:function(){return window.open("https://www.lex-on.es/","_self")}},s.a.createElement("i",{className:"fa fa-lock"})," Return to Lex-on"))))))))}}]),t}(n.PureComponent),Te=Object(o.b)(function(e){return{lexon:e.lexon}})(Ce),xe=a(140),we=a.n(xe),Le=a(141),Ne=a.n(Le),Me=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).onClick=a.onClick.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"onClick",value:function(e){this.props.onClick(e,this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.messagesUnread,n=this.props.iconProps,r=this.props.selected?" selected":"",i=a.toLocaleString();return s.a.createElement("li",{className:"text-truncate text-left text-dark pl-4 pr-5 py-2 border-0 ".concat(r),title:t+(a>0?" (".concat(i,")"):""),onClick:this.onClick},s.a.createElement(me.a,Object.assign({size:"sm"},n)),t,a>0?s.a.createElement("div",{className:"msg-count"},i):null)}}]),t}(n.PureComponent),Ie=(a(269),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={selectedLabel:e.pathname,leftSideBarOpen:!0},a.navigateToList=a.navigateToList.bind(Object(pe.a)(a)),a.composeClick=a.composeClick.bind(Object(pe.a)(a)),a.sidebarAction=a.sidebarAction.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){}},{key:"composeClick",value:function(){this.props.history.push("/compose")}},{key:"navigateToList",value:function(e,t){var a=this.props.labelsResult.labels.find(function(e){return e.id===t});this.props.onLabelClick(a||{id:""})}},{key:"sidebarAction",value:function(){this.props.onSidebarCloseClick(this.state.leftSideBarOpen)}},{key:"renderItems",value:function(e){if(0===e.length)return s.a.createElement("div",null);var t=e.reduce(function(e,t){return e.push(t),e},[]),a=we()(t,"type"),n=[],r=[];return null!=a.user&&(n=a.user.filter(function(e){return!e.labelListVisibility||!0}),r=Ne()(n,"name")),s.a.createElement(s.a.Fragment,null,this.renderFolders(a.system),this.renderLabels(r))}},{key:"renderFolders",value:function(e){var t=this,a=this.props.t,n=[Object(d.a)({},e.find(function(e){return"INBOX"===e.id}),{name:a("sidebar.inbox"),icon:ge.g}),Object(d.a)({},e.find(function(e){return"SENT"===e.id}),{messagesUnread:0,name:a("sidebar.sent"),icon:ge.d}),Object(d.a)({},e.find(function(e){return"TRASH"===e.id}),{messagesUnread:0,name:a("sidebar.trash"),icon:ge.m}),Object(d.a)({},e.find(function(e){return"SPAM"===e.id}),{name:a("sidebar.spam"),icon:ge.e})];return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{key:"olders-nav-title",className:"pl-2 nav-title"},s.a.createElement("img",{className:"logo-ext",border:"0",alt:"otulook",src:"assets/img/gmail.png"}),a("sidebar.folders")),n.map(function(e){var a={icon:e.icon,size:"lg"};return s.a.createElement(Me,{key:e.id+"_label",onClick:t.navigateToList,name:e.name,id:e.id,messagesUnread:e.messagesUnread,iconProps:a,selected:e.selected})}))}},{key:"renderLabels",value:function(e){var t=this,a=this.props.t;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{key:"olders-nav-title",className:"pl-2 nav-title"},a("sidebar.labels")),e.map(function(e){var a={icon:ge.f,color:"#001978",size:"lg"};return s.a.createElement(Me,{key:e.id+"_label",onClick:t.navigateToList,name:e.name,id:e.id,messagesUnread:e.messagesUnread,iconProps:a,selected:e.selected})}))}},{key:"render",value:function(){var e=this.props.t,t=this.props.sideBarCollapsed;return s.a.createElement("nav",{id:"left-sidebar",className:t?"d-flex flex-column text-truncate left-panel sidebar-close":"d-flex flex-column text-truncate left-panel sidebar-open"},s.a.createElement("div",{className:"compose-panel"},s.a.createElement("div",{className:"d-flex justify-content-center p-2 compose-btn"},s.a.createElement("div",{className:"compose-div"},s.a.createElement(he.a,{className:"btn font-weight-bold BtnLfcolor uppercase compose-btn",to:{pathname:"/compose",search:"",state:{composeProps:{subject:"",to:"",content:""}}}},s.a.createElement("img",{className:"ImgLf",border:"0",alt:"otulook",src:"assets/img/plus.png"}),e("sidebar.compose")),s.a.createElement(ve.a,{onClick:this.props.sideBarToggle,className:"btn-transparent margin-right-20 float-right margin-top-10"},s.a.createElement(me.a,{icon:ge.b,size:"1x"}))))),s.a.createElement(ke.a,{component:"ul",className:"d-flex flex-column border-0 m-0 sidebar"},this.renderItems(this.props.labelsResult.labels)))}}]),t}(n.PureComponent)),_e=Object(ee.c)()(Ie),Re=function(){return s.a.createElement("div",{className:"d-flex w-100 h-100 flex-column justify-content-center align-items-center"},s.a.createElement("div",null,s.a.createElement(me.a,{icon:ge.e,size:"5x"})),s.a.createElement("div",{className:"h1"},"404 ERROR"),s.a.createElement("div",null,"The requested content was not found."))},Pe=(a(270),a(395)),Ae=a(31),Ue=a.n(Ae),De=(a(271),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={isChecked:!!e.checked},a.onChange=a.onChange.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({isChecked:this.props.checked})}},{key:"onChange",value:function(e){this.setState({isChecked:!this.state.isChecked}),this.props.onChange(e)}},{key:"render",value:function(){return s.a.createElement("label",{className:"custom-control fill-checkbox"},s.a.createElement("input",{checked:this.state.isChecked,type:"checkbox",onChange:this.props.onChange,className:"fill-control-input"}),s.a.createElement("span",{className:"fill-control-indicator"}),this.props.label?s.a.createElement("span",{className:"fill-control-description"},this.props.label):null)}}]),t}(n.PureComponent)),Ge=function(e){return s.a.createElement("div",{className:"d-flex ml-2 justify-content-center align-items-center"},s.a.createElement(De,{checked:e.selected,onChange:e.onChange}))},Fe=function(e){return s.a.createElement("div",{className:"wrapper text-4"},s.a.createElement("div",{className:"wrapper align-items-center text-2"},s.a.createElement("div",{className:"text from-name"},e.fromName),s.a.createElement("div",{className:"text"},e.subject)))},Be=function(e){return s.a.createElement("div",{className:"wrapper num-4"},s.a.createElement("div",{className:"wrapper num-2"},s.a.createElement("div",{className:"num pr-4"},e.hasAttachment?s.a.createElement(me.a,{icon:ge.h}):""),s.a.createElement("div",{className:"num pr-4"},e.formattedDate)))},He=function(e){var t=[];if(!e||""===e.trim())return t;for(var a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n=e.trim().replace(/[;\s]/g,",").split(","),s=0;s<n.length;s++){var r=n[s];if(""!==r){if(!a.test(r)){t=[];break}t.push(r)}}return t},ze=function(e){if(!e)return null;var t,a,n;return null!==(t=/(?:"?([^"]*)"?\s)?(?:<?(.+@[^>]+)>?)/.exec(e))&&(n=t[2],a=t[1]||n.slice(0,n.indexOf("@"))),{name:a,email:n}},Qe=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).onSelectionChange=a.onSelectionChange.bind(Object(pe.a)(a)),a.getMessage=a.getMessage.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"onSelectionChange",value:function(e){this.props.onSelectionChange(e.target.checked,this.props.data.id)}},{key:"getMessage",value:function(e){this.props.history.push("/".concat(this.props.data.id))}},{key:"getFromName",value:function(e){return ze(e).name}},{key:"getFormattedDate",value:function(e,t){var a=Ue()(e);a.isValid()||(a=Ue()(t.parserFn(t.date)));var n=Ue()(new Date);return a.format("YYYYMMDD")===n.format("YYYYMMDD")?a.format("h:mm A"):a.year()!==n.year()?a.format("YYYY/MM/DD"):a.format("MMM D")}},{key:"render",value:function(){var e=this.props.data.payload.headers.find(function(e){return"X-RECEIVED"===e.name.toUpperCase()}),t=e?e.value.split(";")[1].trim():"",a=this.getFormattedDate(t,{date:this.props.data.internalDate,parserFn:parseInt}),n=this.props.data.labelIds.indexOf("UNREAD")>-1?" font-weight-bold":"",r=this.props.data.selected?" selected":"",i=this.props.data.payload.headers.find(function(e){return"SUBJECT"===e.name.toUpperCase()}),o=i?i.value:"",c=this.props.data.payload.headers.find(function(e){return"FROM"===e.name.toUpperCase()}),l=c?this.getFromName(c.value):"undefined";return s.a.createElement("div",{className:"d-flex table-row-wrapper".concat(r)},s.a.createElement(Ge,{selected:this.props.data.selected,onChange:this.onSelectionChange}),s.a.createElement("div",{onClick:this.getMessage,className:"table-row px-2 py-3".concat(n)},s.a.createElement(Fe,{fromName:l,subject:o}),s.a.createElement(Be,{formattedDate:a,hasAttachment:"multipart/mixed"===this.props.data.payload.mimeType})))}}]),t}(n.PureComponent),Ye=Object(Pe.a)(Qe),Ve=function(e){var t=Object(ee.b)().t;return s.a.createElement("div",{className:"btn-group ml-auto"},s.a.createElement("button",{onClick:e.navigateToPrevPage,disabled:null==e.prevToken,className:"btn btn-light bg-white border-1 border-dark px-3 btn-sm",title:t("pager-buttons.previous-page")},s.a.createElement(me.a,{icon:ge.b})),s.a.createElement("button",{onClick:e.navigateToNextPage,disabled:null==e.nextToken,className:"btn btn-light bg-white border-1  border-dark px-3 btn-sm",title:t("pager-buttons.next-page")},s.a.createElement(me.a,{icon:ge.c})))},qe=(a(273),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).getClickHandler=a.getClickHandler.bind(Object(pe.a)(a)),a.trashHandler=a.getClickHandler(["TRASH"]),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"getClickHandler",value:function(e){var t=this;return function(a){t.props.onClick(e)}}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",null,s.a.createElement("div",{className:"action-btn"},s.a.createElement(me.a,{title:e("message-list.move-to-trash"),onClick:this.trashHandler,icon:ge.l,size:"lg"})))}}]),t}(n.PureComponent)),Ke=Object(ee.c)()(qe),We=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).onSelectionChange=a.onSelectionChange.bind(Object(pe.a)(a)),a.navigateToNextPage=a.navigateToNextPage.bind(Object(pe.a)(a)),a.navigateToPrevPage=a.navigateToPrevPage.bind(Object(pe.a)(a)),a.modifyMessages=a.modifyMessages.bind(Object(pe.a)(a)),a.state={selectedMessageIds:[]},a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"onSelectionChange",value:function(e){var t=e.target.checked,a=this.props.messagesResult.messages.reduce(function(e,t){return e.push(t.id),e},[]);this.setState({selectedMessageIds:a}),this.props.toggleSelected(a,t),window.dispatchEvent(new CustomEvent("CheckAllclick",{detail:{listMessages:a,chkselected:t}})),t?this.props.addListMessages(a):this.props.deleteListMessages(a)}},{key:"navigateToNextPage",value:function(){this.props.navigateToNextPage(this.props.nextToken)}},{key:"navigateToPrevPage",value:function(){this.props.navigateToPrevPage(this.props.prevToken)}},{key:"modifyMessages",value:function(e,t){var a=this.props.messagesResult.messages.filter(function(e){return e.selected}).map(function(e){return e.id}),n=Object(d.a)({},e&&{addLabelIds:e},t&&{removeLabelIds:t});this.props.modifyMessages(Object(d.a)({ids:a},n))}},{key:"render",value:function(){var e=this.props.sideBarCollapsed,t=!1,a=[];return this.props.messagesResult&&(a=this.props.messagesResult.messages.filter(function(e){return e.selected}),t=this.props.messagesResult.messages.length>0&&a.length===this.props.messagesResult.messages.length),s.a.createElement("div",{className:"msg-toolbar"},s.a.createElement("div",{className:"pl-2 py-2 pr-4 d-flex align-items-center bd-highlight  align-center "},s.a.createElement("div",{className:"d-flex align-content-center align-items-center "},s.a.createElement("div",{className:"padding-top-10"},s.a.createElement("span",{className:e?"":"with-side-bar"},s.a.createElement(ve.a,{onClick:this.props.sideBarToggle,className:"btn-transparent margin-right-10 margin-bottom-10"},s.a.createElement(me.a,{icon:ge.a,size:"1x"}))),s.a.createElement(De,{checked:t,onChange:this.onSelectionChange})),s.a.createElement("div",null),s.a.createElement("div",{className:"ml-auto p-2 bd-highlight"},s.a.createElement("div",null,a.length?s.a.createElement(Ke,{onClick:this.modifyMessages}):null))),s.a.createElement(Ve,{nextToken:this.props.nextToken,prevToken:this.props.prevToken,navigateToPrevPage:this.navigateToPrevPage,navigateToNextPage:this.navigateToNextPage})))}}]),t}(n.PureComponent),Xe=Object(o.b)(function(e){return{messagesResult:e.messagesResult,selectedMessages:e.messageList.selectedMessages}},function(e){return Object(c.b)({toggleSelected:U,modifyMessages:z,deleteListMessages:V,addListMessages:q},e)})(We),Ze=(a(274),function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this.props.messagesTotal,t="";return e>0&&(t="".concat(e.toLocaleString()," messages")),s.a.createElement("div",{className:"mt-auto p-2  list-footer"},s.a.createElement("div",{className:"d-flex px-4 h-100 align-items-center"},s.a.createElement("div",{className:"total-count"},t),s.a.createElement("div",{className:"ml-auto "})))}}]),t}(n.PureComponent)),Je=(a(275),{LIST:1,CONTENT:2,EDIT:3}),$e=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={viewMode:Je.LIST,contentMessageId:void 0,currentLabel:""},a.onSelectionChange=a.onSelectionChange.bind(Object(pe.a)(a)),a.renderView=a.renderView.bind(Object(pe.a)(a)),a.renderMessages=a.renderMessages.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=0===e.indexOf("?")?e.slice(1):null;t&&0===this.props.messagesResult.pageTokens.length&&this.props.addInitialPageToken(t);var a=""===this.props.searchQuery?[this.props.parentLabel.id]:void 0;this.props.getLabelMessages(Object(d.a)({},a&&{labelIds:a},{pageToken:t}))}},{key:"componentDidUpdate",value:function(e,t){if(e.location.search!==this.props.location.search){var a=this.props.location.search,n=0===a.indexOf("?")?a.slice(1):null,s=""===this.props.searchQuery?[this.props.parentLabel.id]:void 0;this.props.getLabelMessages(Object(d.a)({},s&&{labelIds:s},{pageToken:n}))}}},{key:"onSelectionChange",value:function(e,t){this.props.toggleSelected([t],e),window.dispatchEvent(new CustomEvent("Checkclick",{detail:{name:t,chkselected:e}})),e?this.props.addMessage(t):this.props.deleteMessage(t)}},{key:"renderSpinner",value:function(){return s.a.createElement("div",{className:"d-flex h-100 justify-content-center align-items-center  "},s.a.createElement(me.a,{icon:ge.k,spin:!0,size:"3x"}))}},{key:"renderMessages",value:function(){var e=this,t=this.props.t;return this.props.messagesResult.loading?this.renderSpinner():0===this.props.messagesResult.messages.length?s.a.createElement("div",{className:"p-4 text-center"},t("message-list.no-message")):this.props.messagesResult.messages.map(function(t){return e.props.selectedMessages.find(function(e){return e.id===t.id})&&(t.selected=!0),s.a.createElement(Ye,{data:t,key:t.id,onSelectionChange:e.onSelectionChange,onClick:e.getMessage})})}},{key:"renderView",value:function(){switch(this.state.viewMode){case Je.EDIT:return this.renderEditView();default:return this.renderMessages()}}},{key:"getPageTokens",value:function(){if(this.props.messagesResult.loading)return{nextToken:null,prevToken:null};var e,t=this.props,a=t.messagesResult,n=t.location,s=n.pathname,r=a.nextPageToken,i=n.search,o=0===i.indexOf("?")?i.slice(1):null;if(o){var c=a.pageTokens.indexOf(o);c>-1?(r=a.pageTokens[c+1],e=(e=a.pageTokens[c-1])?"".concat(s,"?").concat(e):s):e=s}return{nextToken:r=r?"".concat(s,"?").concat(r):null,prevToken:e}}},{key:"render",value:function(){var e=this.props.messagesResult,t=e.label?e.label.result.messagesTotal:0,a=this.getPageTokens(),n=a.nextToken,r=a.prevToken,i=this.props.sideBarCollapsed;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Xe,{sideBarCollapsed:i,sideBarToggle:this.props.sideBarToggle,nextToken:n,prevToken:r,navigateToNextPage:this.props.navigateToNextPage,navigateToPrevPage:this.props.navigateToPrevPage}),s.a.createElement(ke.a,{className:"container-fluid no-gutters px-0 message-list-container"},this.renderView()),s.a.createElement(Ze,{messagesTotal:t}))}}]),t}(n.PureComponent),et=Object(c.d)(Pe.a,Object(ee.c)(),Object(o.b)(function(e){return{selectedMessages:e.messageList.selectedMessages}},function(e){return Object(c.b)({addMessage:Q,deleteMessage:Y},e)}))($e),tt=a(393),at=(a(276),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).trashHandler=a.getClickHandler(["TRASH"]),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"getClickHandler",value:function(e){var t=this;return function(a){t.props.onClick(e)}}},{key:"render",value:function(){var e=this.props.t;if(!this.props.messageResult.result)return null;for(var t,a,n,r=this.props.messageResult.result.messageHeaders,i=0;i<r.length;i++){var o=r[i];switch(o.name){case"Subject":n=o;break;case"From":t||(t=o);break;case"Reply-To":t=o;break;case"Cc":a=o}}var c=ze(t.value),l=r.find(function(e){return"X-Received"===e.name}),u=l?l.value.split(";")[1].trim():"",p=Ue()(u);p.isValid()||(p=Ue()(parseInt(this.props.messageResult.result.internalDate)));var m="<p>On ".concat(p.format("MMMM Do YYYY, h:mm:ss a")," < ").concat(c.email," > wrote:</p>"),g=Object(d.a)({subject:"Re: ".concat(n.value),to:c.email,content:"<p>&nbsp;</p>\n          <p>&nbsp;</p>\n          <p>&nbsp;</p>\n          ".concat(m,"\n          <blockquote>").concat(this.props.messageResult.body,"</blockquote>")},a&&{cc:a.value}),h=this.props.sideBarCollapsed;return s.a.createElement("div",{className:"d-flex justify-content-center align-items-center message-toolbar"},s.a.createElement("div",{className:"action-btns"},s.a.createElement("span",{className:h?"action-btn mr-2":"action-btn mr-2 with-side-bar"},s.a.createElement(ve.a,{onClick:this.props.sideBarToggle,className:"btn-transparent"},s.a.createElement(me.a,{icon:ge.a,size:"1x"}))),s.a.createElement("div",{className:"action-btn mr-2"},s.a.createElement("button",{className:"btn",onClick:this.trashHandler},s.a.createElement(me.a,{title:e("message-toolbar.move-to-trash"),icon:ge.l,size:"lg"}))),s.a.createElement("div",{className:"action-btn mr-2"},s.a.createElement(he.a,{to:{pathname:"/compose",search:"",sideBarCollapsed:this.props.sideBarCollapsed,sideBarToggle:this.props.sideBarToggle,state:{composeProps:g}}},s.a.createElement(me.a,{title:e("message-toolbar.reply"),icon:ge.i,size:"lg"})))))}}]),t}(n.PureComponent)),nt=Object(ee.c)()(at);a(277);function st(e,t,a){t=t||"",a=a||512;for(var n=atob(e),s=[],r=0;r<n.length;r+=a){for(var i=n.slice(r,r+a),o=new Array(i.length),c=0;c<i.length;c++)o[c]=i.charCodeAt(c);var l=new Uint8Array(o);s.push(l)}return new Blob(s,{type:t})}function rt(e,t,a){var n=t.body.attachmentId;window.gapi.client.gmail.users.messages.attachments.get({id:n,messageId:e,userId:"me"}).execute(function(e){a(t.filename,t.mimeType,e)})}function it(e,t){var a=document.createElement("a"),n=document.createTextNode(t);return a.appendChild(n),a.href=e,a.title=t,a.download=t,a.style.textDecoration="none",a.style.padding="5px",a.style.margin="15px 0",a.style.clear="both",a}function ot(e){var t=document.createElement("span");t.style.whiteSpace="nowrap",t.style.backgroundColor="#fafafa",t.style.border="solid 1px #aaa",t.style.padding="5px",t.style.margin="10px",t.style.display="inline-block";var a=function(e){var t,a=document.createElement("img");switch(e){case"image/png":t="../assets/img/file-extensions/png.png";break;case"image/jpeg":t="../assets/img/file-extensions/jpg.png";break;case"application/pdf":t="../assets/img/file-extensions/pdf.png";break;case"text/plain":t="../assets/img/file-extensions/txt.png";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="../assets/img/file-extensions/doc.png";break;default:t="../assets/img/file-extensions/default.png"}return a.src=t,a.style.alt="Attached file",a.style.display="inline-block",a.style.verticalAlign="middle",a}(e);return t.appendChild(a),t}var ct=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={errorMessage:void 0},a.iframeRef=s.a.createRef(),a.modifyMessage=a.modifyMessage.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(e){var t=this.props.match.params.id;this.props.getEmailMessage(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.emailMessageResult;if(!t.loading)if(t.failed)this.state.errorMessage||this.setState({errorMessage:t.error.result.error.message,modal:!0});else if(this.iframeRef.current){var a=this.iframeRef.current.contentWindow.document.body;a.style.margin="0px",a.style.fontFamily="Arial, Helvetica, sans-serif",a.style.fontSize="13px",a.innerHTML=this.props.emailMessageResult.body;var n=t.attach;if("undefined"!==typeof n&&n.length>0){var s=document.getElementById("message-iframe"),r=function(){var e=document.createElement("div");return e.style.height="30px",e.id="Dividier",e}();s.contentDocument.body.appendChild(r);for(var i=0;i<n.length;i++)n[i].filename&&n[i].filename.length>0&&rt(t.id,n[i],function(e,t,a){var n=st(a.data.replace(/-/g,"+").replace(/_/g,"/"),t,a.size),r=it(URL.createObjectURL(n),e),i=ot(t);i.appendChild(r),s.contentDocument.body.appendChild(i)})}}}},{key:"renderSpinner",value:function(){return s.a.createElement("div",{className:"d-flex h-100 justify-content-center align-items-center  "},s.a.createElement(me.a,{icon:ge.k,spin:!0,size:"3x"}))}},{key:"renderErrorModal",value:function(){return s.a.createElement(tt.a,{to:"/notfound"})}},{key:"modifyMessage",value:function(e,t){var a=this.props.emailMessageResult.result.id,n=Object(d.a)({},e&&{addLabelIds:e},t&&{removeLabelIds:t});this.props.modifyMessages(Object(d.a)({ids:[a]},n)),this.props.history.goBack()}},{key:"render",value:function(){return this.props.emailMessageResult.loading?this.renderSpinner():s.a.createElement(s.a.Fragment,null,s.a.createElement(nt,{sideBarCollapsed:this.props.sideBarCollapsed,sideBarToggle:this.props.sideBarToggle,history:this.props.history,onClick:this.modifyMessage,messageResult:this.props.emailMessageResult}),s.a.createElement("div",{className:"d-flex justify-content-center align-items-center message-content"},this.props.emailMessageResult.loading?this.renderSpinner():null,this.state.errorMessage?this.renderErrorModal():s.a.createElement("iframe",{ref:this.iframeRef,title:"Message contents",id:"message-iframe",style:{display:this.props.emailMessageResult.loading?"none":"block"}})))}}]),t}(n.Component),lt=Object(c.d)(Pe.a,Object(o.b)(function(e){return{emailMessageResult:e.emailMessageResult}},function(e){return Object(c.b)({getEmailMessage:D,modifyMessages:z},e)}))(ct),dt=a(57),ut=a(143),pt=a.n(ut),mt=(a(296),a(297),a(24)),gt=a(313),ht=a(336),bt=a(352),ft=bt.DragDrop,vt=bt.ProgressBar,Et=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={to:e.history.location.state.composeProps.to||"",cc:e.history.location.state.composeProps.cc||"",bcc:e.history.location.state.composeProps.bcc||"",subject:e.history.location.state.composeProps.subject||"",content:e.history.location.state.composeProps.content||"",showInlineDashboard:!1,open:!1,uppyPreviews:[]},a.handleChange=a.handleChange.bind(Object(pe.a)(a)),a.sendEmail=a.sendEmail.bind(Object(pe.a)(a)),a.goBack=a.goBack.bind(Object(pe.a)(a)),a.closeModal=a.closeModal.bind(Object(pe.a)(a)),a.setField=a.setField.bind(Object(pe.a)(a)),a.uppy=new mt({id:"uppy1",autoProceed:!1,debug:!0}).use(gt,{endpoint:"https://master.tus.io/files/"}).use(ht,{serverUrl:"https://companion.uppy.io"}),a.reader=new FileReader,a.uploadFile=a.uploadFile.bind(Object(pe.a)(a)),a.addFileToState=a.addFileToState.bind(Object(pe.a)(a)),a.uppy.on("complete",function(e){console.log("Upload complete! We\ufffdve uploaded these files:",e.successful)}),a.uppy.on("file-added",function(e){console.log("Added file",e),a.reader.onload=function(t){return a.addFileToState({file:e,base64:t.target.result})},a.reader.readAsDataURL(e.data)}),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"closeModal",value:function(){this.props.history.push("/inbox")}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"addFileToState",value:function(e){var t=e.file,a=e.base64;this.setState({uppyPreviews:[{file:t,base64:a}].concat(Object(w.a)(this.state.uppyPreviews))})}},{key:"uploadFile",value:function(){console.log(this.state.uppyPreviews)}},{key:"componentWillUnmount",value:function(){this.uppy.close()}},{key:"handleChange",value:function(e){this.setState({content:e})}},{key:"sendEmail",value:function(){var e=this,t=He(this.state.to);if(t.length&&""!==this.state.subject.trim()&&""!==this.state.content){var a={To:t.join(", "),Subject:this.state.subject,attachments:this.state.uppyPreviews},n=He(this.state.cc);n.length&&(a.Cc=n.join(", "));var s=He(this.state.bcc);s.length&&(a.Bcc=s.join(", "));var r=this.state.uppyPreviews;(function(e){var t,a=e.headers,n=e.body,s=(e.attachments,""),r=Object(d.a)({},a);for(var i in r["MIME-Version"]="1.0",r["Content-Type"]="multipart/mixed; boundary=alternative",r)s+="".concat(i,": ").concat(r[i],"\r\n");s+="\r\n",s+="--alternative\r\n",s+='Content-Type: multipart/alternative; boundary = "attached"\r\n',s+="\r\n",s+="--attached\r\n",s+='Content-Type: text/plain; charset = "iso-8859-1"\r\n',s+="Content-Transfer-Encoding: quoted-printable\r\n",s+="\r\n",s+="".concat(n,"\r\n"),s+="\r\n",s+="--attached\r\n",s+='Content-Type: text/html; charset = "iso-8859-1"\r\n',s+="Content-Transfer-Encoding: quoted-printable\r\n",s+="\r\n",s+="\r\n<html><head></head><body>".concat(n,"</body></html>\r\n"),s+="\r\n",s+="--attached--\r\n";for(var o=0;o<r.attachments.length;o++){var c=v(r.attachments[o].base64),l="string"!==typeof(t=r.attachments[o].base64)?null:t.split("base64,")[1],u=r.attachments[o].file.name;console.log(c),console.log(l),s+="--alternative\r\n",s+="Content-Type: ".concat(c,"\r\n"),s+="Content-Transfer-Encoding: base64\r\n",s+='Content-Disposition: attachment; filename = "'.concat(u,'"\r\n'),s+="".concat(l,"\r\n")}s+="--alternative--\r\n";var p=unescape(encodeURIComponent(s));return window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:window.btoa(p).replace(/\+/g,"-").replace(/\//g,"_")}})})({headers:a,body:this.state.content,attachments:r}).then(function(t){e.resetFields(),e.closeModal()})}}},{key:"resetFields",value:function(){this.setState({to:this.props.to||"",cc:this.props.cc||"",bcc:this.props.bcc||"",subject:this.props.subject||"",content:this.props.content||"",uppyPreviews:[]})}},{key:"setField",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){t.setState(Object(dt.a)({},e,a?n.target.value.trim():n.target.value))}}},{key:"isInvalid",value:function(e){var t=this.state[e].trim();return t.length>0&&!He(t).length}},{key:"render",value:function(){var e=this.props.sideBarCollapsed,t=this.props.t;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"compose-dialog"},s.a.createElement("div",{className:"compose-panel"},s.a.createElement("div",{className:"d-flex justify-content-center align-items-center message-toolbar"},s.a.createElement("div",{className:"action-btns"},s.a.createElement("span",{className:e?"action-btn mr-2":"action-btn mr-2 with-side-bar"},s.a.createElement(ve.a,{onClick:this.props.sideBarToggle,className:"btn-transparent"},s.a.createElement(me.a,{icon:ge.a,size:"1x"})))))),s.a.createElement("div",{className:"container-panel"},s.a.createElement("div",{className:"compose-message"},s.a.createElement("div",{className:"message-fields"},s.a.createElement(ve.g,null,s.a.createElement(ve.h,{addonType:"prepend"},t("compose-message.to")),s.a.createElement(ve.f,{tabIndex:1,value:this.state.to,placeholder:t("compose-message.comma-separated"),invalid:this.isInvalid("to"),onChange:this.setField("to")})),s.a.createElement(ve.g,null,s.a.createElement(ve.h,{addonType:"prepend"},"Cc:"),s.a.createElement(ve.f,{tabIndex:2,value:this.state.cc,placeholder:t("compose-message.comma-separated"),invalid:this.isInvalid("cc"),onChange:this.setField("cc")})),s.a.createElement(ve.g,null,s.a.createElement(ve.h,{addonType:"prepend"},"Bcc:"),s.a.createElement(ve.f,{tabIndex:3,placeholder:t("compose-message.comma-separated"),invalid:this.isInvalid("bcc"),onChange:this.setField("bcc")})),s.a.createElement(ve.g,null,s.a.createElement(ve.h,{addonType:"prepend"},t("compose-message.subject")),s.a.createElement(ve.f,{tabIndex:4,placeholder:"",value:this.state.subject,onChange:this.setField("subject",!1)}))),s.a.createElement("div",null,s.a.createElement("div",{className:"editor-wrapper"},s.a.createElement(pt.a,{tabIndex:5,value:this.state.content,onChange:this.handleChange,className:"autoResizeHeight"})))),s.a.createElement("div",{className:"ImagePreviewContainer compose-dropcontainer"},this.state.uppyPreviews.map(function(e){return s.a.createElement("object",{className:"FileList",key:e.file.id,type:e.file.type,width:"80px",height:"auto",data:e.base64},e.file.name)})),s.a.createElement(vt,{uppy:this.uppy,hideAfterFinish:!1}),s.a.createElement("div",{id:"Divfooter",className:"compose-droppanel"},s.a.createElement(ft,{uppy:this.uppy,width:"100%",height:"130px","min-height":"130px",note:t("compose-message.add-attachments"),locale:{strings:{dropHereOr:t("compose-message.drag-and-drop")+" "+t("compose-message.or")+" %{browse}",browse:t("compose-message.browse")}}})),s.a.createElement("div",{className:"footer compose-footer"},s.a.createElement(ve.a,{className:"mr-auto font-weight-bold",color:"primary",onClick:this.sendEmail,title:t("compose-message.send-message")},t("compose-message.send"))," ",s.a.createElement(ve.a,{className:"mr-left font-weight-bold btn-outline-primary",title:t("compose-message.discard"),color:"secondary",onClick:this.closeModal},t("compose-message.discard"))))))}}]),t}(n.PureComponent),yt=Object(ee.c)()(Et),Ot=function(){return new Promise(function(e,t){window.gapi.client.init({apiKey:"AIzaSyD6fV04pR57Wc8ZnRZ-UiguUut12uaNYA0",clientId:"50415328365-v7emm6mrvs61s5jkiheofdbirer2jog0.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],scope:"https://mail.google.com/"}).then(function(a){var n=window.gapi.auth2.getAuthInstance();n.isSignedIn.get()?(n.isSignedIn.listen(function(e){kt(e)}),e(n.currentUser.Ab)):t()}).catch(function(e){t(e)})})},kt=function(e){},St=function(){return window.gapi.auth2.getAuthInstance().signOut()},jt=a(144),Ct=(a(385),{root:{fontFamily:'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif',fontWeight:300},header:{backgroundColor:"#001978",color:"white",padding:"16px",fontSize:"16px",height:"65px",marginLeft:"1px"}}),Tt=function(e){var t=e.style?Object(d.a)({},Ct.root,e.style):Ct.root;return s.a.createElement("div",{style:t},s.a.createElement("div",{style:Ct.header},s.a.createElement("span",null,e.title),s.a.createElement("img",{className:"headerButtons",alt:e.title,border:"0",src:"assets/img/buttons.png",onClick:function(){e.sidebarDocked()}})),e.children)},xt=a(29),wt=a(37),Lt=a.n(wt),Nt=a(61),Mt=function(){var e=Object(Nt.a)(Lt.a.mark(function e(t){return Lt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){var n=document.createElement("script");n.src=t,n.onload=e,n.onerror=a;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),It=function(){var e=Object(Nt.a)(Lt.a.mark(function e(){return Lt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(p.url.URL_MF_LEXON);case 2:return e.abrupt("return",window.lexon);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_t=function(e){return e.pathname.startsWith("/")},Rt={sidebar:{width:319,height:"100%"},sidebarLink:{display:"block",padding:"16px 0px",color:"#757575",textDecoration:"none"},divider:{margin:"8px 0",height:1,backgroundColor:"#757575"},content:{padding:0,height:"100%",backgroundColor:"#fff",overflowY:"hidden"}},Pt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={style:a.props.style?Object(d.a)({},Rt.sidebar,a.props.style):Rt.sidebar},a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){try{"MOUNTED"===xt.getAppStatus("lexon-app")?(xt.unloadApplication("lexon-app",!1),xt.start()):(xt.registerApplication("lexon-app",It,_t),xt.start())}catch(e){xt.unloadApplication("lexon-app",!1),console.error(e)}}},{key:"render",value:function(){var e=this.props.sidebarDocked,t=this.state.style;return s.a.createElement(Tt,{title:"LEX-ON",style:t,sidebarDocked:e},s.a.createElement("div",{style:Rt.content},s.a.createElement("div",{id:"lexon-app"})))}}]),t}(n.Component),At={sidebar:{width:319,height:"100%"},sidebarLink:{display:"block",padding:"16px 0px",color:"#757575",textDecoration:"none"},divider:{margin:"8px 0",height:1,backgroundColor:"#757575"},content:{padding:0,height:"100%",backgroundColor:"#fff"}},Ut=function(e){var t=e.style?Object(d.a)({},At.sidebar,e.style):At.sidebar,a=e.sidebarDocked;return s.a.createElement(Tt,{title:"CALENDARIO",style:t,sidebarDocked:a},s.a.createElement("div",{style:At.content},s.a.createElement("img",{border:"0",alt:"Lefebvre",src:"assets/img/calendar-fake.png"})))},Dt=(a(388),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).getLabelList=a.getLabelList.bind(Object(pe.a)(a)),a.getLabelMessages=a.getLabelMessages.bind(Object(pe.a)(a)),a.renderLabelRoutes=a.renderLabelRoutes.bind(Object(pe.a)(a)),a.loadLabelMessages=a.loadLabelMessages.bind(Object(pe.a)(a)),a.navigateToNextPage=a.navigateToNextPage.bind(Object(pe.a)(a)),a.navigateToPrevPage=a.navigateToPrevPage.bind(Object(pe.a)(a)),a.addInitialPageToken=a.addInitialPageToken.bind(Object(pe.a)(a)),a.onSignout=a.onSignout.bind(Object(pe.a)(a)),a.state={isVisible:!0,fluid:!0,customAnimation:!1,slow:!1,size:.25,sidebarOpen:!1,sidebarDocked:!1,leftSideBar:{collapsed:!1},sidebarComponent:s.a.createElement("img",{border:"0",alt:"Lefebvre",src:"assets/img/lexon-fake.png"})},a.onSetSidebarDocked=a.onSetSidebarDocked.bind(Object(pe.a)(a)),a.onSetSidebarOpenCalendar=a.onSetSidebarOpenCalendar.bind(Object(pe.a)(a)),a.onSetSidebarOpenLexon=a.onSetSidebarOpenLexon.bind(Object(pe.a)(a)),a.onSetSidebarOpenQMemento=a.onSetSidebarOpenQMemento.bind(Object(pe.a)(a)),a.onSetSidebarOpenCompliance=a.onSetSidebarOpenCompliance.bind(Object(pe.a)(a)),a.onSetSidebarOpenDatabase=a.onSetSidebarOpenDatabase.bind(Object(pe.a)(a)),a.handleGetUserFromLexonConnector=a.handleGetUserFromLexonConnector.bind(Object(pe.a)(a)),a.toggleSideBar=a.toggleSideBar.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"toggleSideBar",value:function(){var e=!this.state.leftSideBar.collapsed;this.setState({leftSideBar:{collapsed:e}})}},{key:"sendMessagePutUser",value:function(e){var t=this.props.selectedMessages.map(function(e){return e.id});window.dispatchEvent(new CustomEvent("PutUserFromLexonConnector",{detail:{user:e,selectedMessageId:t}}))}},{key:"handleGetUserFromLexonConnector",value:function(){var e=this.props.lexon.userId;e&&this.sendMessagePutUser(e)}},{key:"onSetSidebarOpenCalendar",value:function(e){this.setState({sidebarComponent:s.a.createElement(Ut,{sidebarDocked:this.onSetSidebarDocked})}),this.setState({sidebarDocked:e})}},{key:"onSetSidebarOpenLexon",value:function(e){this.setState({sidebarComponent:s.a.createElement(Pt,{sidebarDocked:this.onSetSidebarDocked})}),this.setState({sidebarDocked:e})}},{key:"onSetSidebarOpenQMemento",value:function(e){var t=s.a.createElement("img",{border:"0",alt:"Lefebvre",src:"assets/img/lexon-fake-null.png"});this.setState({sidebarComponent:t}),this.setState({sidebarDocked:e})}},{key:"onSetSidebarOpenCompliance",value:function(e){var t=s.a.createElement("img",{border:"0",alt:"Lefebvre",src:"assets/img/lexon-fake-null.png"});this.setState({sidebarComponent:t}),this.setState({sidebarDocked:e})}},{key:"onSetSidebarOpenDatabase",value:function(e){var t=s.a.createElement("img",{border:"0",alt:"Lefebvre",src:"assets/img/lexon-fake-null.png"});this.setState({sidebarComponent:t}),this.setState({sidebarDocked:e})}},{key:"onSetSidebarDocked",value:function(e){this.setState({sidebarDocked:e})}},{key:"componentDidMount",value:function(){var e=this;this.getLabelList(),window.addEventListener("toggleClock",function(e){alert(e.detail.name)}),window.addEventListener("GetUserFromLexonConnector",this.handleGetUserFromLexonConnector);var t=this.props.lexon.userId,a=this.props.googleUser.w3.U3;if(null!==t&&null!==a){var n=this.props.googleUser.w3.U3,s="".concat(p.url.URL_UPDATE_DEFAULTACCOUNT,"/").concat(t,"/").concat("GOOGLE","/").concat(n);fetch(s,{method:"GET"}).then(function(t){e.props.history.push("/inbox")})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("GetUserFromLexonConnector",this.handleGetUserFromLexonConnector)}},{key:"componentDidUpdate",value:function(e,t){e.signedInUser!==this.props.signedInUser&&this.setState({signedInUser:this.props.signedInUser});var a=this.props.labelsResult.labels,n=this.props.location.pathname,s=a.find(function(e){return e.selected}),r=a.find(function(e){return e.id.toLowerCase()===n.slice(1)});s?r&&s.id!==r.id&&this.props.selectLabel(r.id):r&&""===this.props.searchQuery&&this.props.selectLabel(r.id)}},{key:"navigateToNextPage",value:function(e){var t=this.props.location.search,a=0===t.indexOf("?")?t.slice(1):"";this.props.setPageTokens({prevPageToken:a}),this.props.history.push(e)}},{key:"navigateToPrevPage",value:function(e){this.props.history.push(e)}},{key:"loadLabelMessages",value:function(e){var t=this.props.searchQuery;this.props.clearPageTokens(),this.props.selectLabel(e.id);var a="/".concat(e.id.toLowerCase());if(t&&""!==t&&(this.props.setSearchQuery(""),a===this.props.location.pathname))return void this.getLabelMessages({labelIds:[e.id]});this.props.history.push("/".concat(e.id.toLowerCase()))}},{key:"getLabelList",value:function(){this.props.getLabels()}},{key:"getLabelMessages",value:function(e){var t=e.labelIds,a=e.q,n=e.pageToken;this.props.emptyLabelMessages(),this.props.getLabelMessages({labelIds:t,q:a,pageToken:n})}},{key:"addInitialPageToken",value:function(e){this.props.addInitialPageToken(e)}},{key:"renderLabelRoutes",value:function(){var e=this,t=this.state.leftSideBar;return this.props.labelsResult.labels.map(function(a){return s.a.createElement(ue.a,{key:a.id+"_route",exact:!0,path:"/"+a.id,render:function(a){var n=e;return s.a.createElement(et,Object.assign({},a,{sideBarCollapsed:t.collapsed,sideBarToggle:e.toggleSideBar,getLabelMessages:e.getLabelMessages,messagesResult:e.props.messagesResult,toggleSelected:e.props.toggleSelected,navigateToNextPage:e.navigateToNextPage,navigateToPrevPage:e.navigateToPrevPage,pageTokens:e.props.pageTokens,addInitialPageToken:e.addInitialPageToken,parentLabel:n.props.labelsResult.labels.find(function(e){return e.id===a.match.path.slice(1)}),searchQuery:e.props.searchQuery}))}})})}},{key:"renderSpinner",value:function(){return s.a.createElement("div",{className:"d-flex h-100 align-items-center justify-content-center"},s.a.createElement(me.a,{icon:ge.k,spin:!0,size:"3x"}))}},{key:"onSignout",value:function(){console.log("IN ... onSignout");var e=this.props.lexon.userId,t="".concat(p.url.URL_RESET_DEFAULTACCOUNT,"/").concat(e);fetch(t,{method:"GET"}).then(function(e){St()}).then(function(t){var a="".concat(p.url.URL_SELECT_ACCOUNT,"/user/").concat(e,"/encrypt/0");window.open(a,"_self")})}},{key:"renderInboxViewport",value:function(){var e=this,t=this.state.leftSideBar,a=this.props.lexon;return this.props.labelsResult.labels.length<1?this.renderSpinner():s.a.createElement(jt.a,{sidebar:this.state.sidebarComponent,open:this.state.sidebarOpen,pullRight:!0,docked:this.state.sidebarDocked,styles:{sidebar:{background:"white",zIndex:100,overflowY:"hidden",WebkitTransition:"-webkit-transform 0s",willChange:"transform"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"hidden",overflowX:"hidden",WebkitOverflowScrolling:"touch",transition:"left .0s ease-out, right .0s ease-out"},overlay:{zIndex:1,position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0,visibility:"hidden",backgroundColor:"rgba(0,0,0,.3)"},dragHandle:{zIndex:1,position:"fixed",top:0,bottom:0}}},s.a.createElement(n.Fragment,null,s.a.createElement(Te,{googleUser:this.props.googleUser,onSignout:this.onSignout,setSearchQuery:this.props.setSearchQuery,getLabelMessages:this.getLabelMessages,searchQuery:this.props.searchQuery}),s.a.createElement("section",{className:"main hbox space-between"},s.a.createElement(_e,{sideBarCollapsed:t.collapsed,sideBarToggle:this.toggleSideBar,getLabelList:this.getLabelList,pathname:this.props.location.pathname,labelsResult:this.props.labelsResult,onLabelClick:this.loadLabelMessages,onSidebarCloseClick:this.handleShowLeftSidebarClick}),s.a.createElement("article",{className:"d-flex flex-column position-relative"},s.a.createElement(de.a,null,this.renderLabelRoutes(),s.a.createElement(ue.a,{exact:!0,path:"/compose",component:function(){return s.a.createElement(yt,{history:e.props.history,sideBarCollapsed:t.collapsed,sideBarToggle:e.toggleSideBar})}}),s.a.createElement(ue.a,{exact:!0,path:"/notfound",component:Re}),s.a.createElement(ue.a,{exact:!0,path:"/:id([a-zA-Z0-9]+)",component:function(){return s.a.createElement(lt,{sideBarCollapsed:t.collapsed,sideBarToggle:e.toggleSideBar})}}))),s.a.createElement("div",{className:"productpanel"},s.a.createElement("span",{className:"productsbutton"},s.a.createElement("div",{onClick:function(){return e.onSetSidebarOpenLexon(!0)}},s.a.createElement("img",{className:a.user?"imgproduct":"imgproductdisable",border:"0",alt:"Lex-On",src:"assets/img/icon-lexon.png"}))),s.a.createElement("span",{className:"productsbutton"},s.a.createElement("div",{onClick:function(){return e.onSetSidebarOpenCalendar(!0)}},s.a.createElement("img",{className:"imgproduct",border:"0",alt:"Calendar",src:"assets/img/icon-calendar.png"}))),s.a.createElement("span",{className:"productsbutton"},s.a.createElement("div",{onClick:function(){return e.onSetSidebarOpenQMemento(!0)}},s.a.createElement("img",{className:"imgproductdisable",border:"0",alt:"Calendar",src:"assets/img/icon-qmemento.png"}))),s.a.createElement("span",{className:"productsbutton"},s.a.createElement("div",{onClick:function(){return e.onSetSidebarOpenCompliance(!0)}},s.a.createElement("img",{className:"imgproductdisable",border:"0",alt:"Calendar",src:"assets/img/icon-compliance.png"}))),s.a.createElement("span",{className:"spaceproduct"})))))}},{key:"render",value:function(){return this.renderInboxViewport()}}]),t}(n.Component)),Gt=Object(c.d)(Pe.a,Object(o.b)(function(e){return{labelsResult:e.labelsResult,messagesResult:e.messagesResult,pageTokens:e.pageTokens,searchQuery:e.searchQuery,lexon:e.lexon,selectedMessages:e.messageList.selectedMessages}},function(e){return Object(c.b)({getLabels:C,getLabelMessages:_,emptyLabelMessages:A,toggleSelected:U,selectLabel:T,setPageTokens:P,addInitialPageToken:B,clearPageTokens:H,setSearchQuery:R},e)}))(Dt),Ft=a(62),Bt=function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"d-flex align-content-center align-items-center w-100 h-100 text-center"},s.a.createElement("div",{className:"mx-auto"},s.a.createElement(Ft.a,{onClick:this.props.onSignIn})))}}]),t}(n.Component),Ht=function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"d-flex align-content-center align-items-center w-100 h-100 text-center"},s.a.createElement("div",{className:"mx-auto"},s.a.createElement(Ft.a,{label:"Signing in...",disabled:!0})))}}]),t}(n.Component),zt=function(){return new Promise(function(e,t){var a=document.createElement("script");a.src="https://apis.google.com/js/api.js",a.async=!0,a.defer=!0,a.onload=function(){a.onload=function(){},e()},a.onreadystatechange=function(){"complete"===a.readyState&&a.onload()},document.body.appendChild(a)})},Qt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={signInStatus:u,googleUser:void 0},a.init=a.init.bind(Object(pe.a)(a)),a.initClient=a.initClient.bind(Object(pe.a)(a)),a.onSignout=a.onSignout.bind(Object(pe.a)(a)),a.onSignInSuccess=a.onSignInSuccess.bind(Object(pe.a)(a)),a.onSignIn=a.onSignIn.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t=function(){var e=localStorage.getItem("lexon");if(null!==e)return JSON.parse(e)}();if(!e&&t){var a=t.lexon;a&&a.user&&this.props.setUser(a.user)}this.props.lexon.isNewAccount||zt().then(this.init),this.props.location.pathname="/inbox"}},{key:"init",value:function(){window.gapi.load("client:auth2",this.initClient)}},{key:"initClient",value:function(){var e=this;Ot().then(this.onSignInSuccess).catch(function(t){e.setState({signInStatus:"AUTH_FAIL"})})}},{key:"onSignout",value:function(){this.props.signOut()}},{key:"onSignIn",value:function(){window.gapi.auth2.getAuthInstance().signIn().then(this.onSignInSuccess)}},{key:"onSignInSuccess",value:function(e){this.setState({signInStatus:"AUTH_SUCCESS",googleUser:e})}},{key:"renderView",value:function(){var e=this.state.signInStatus;return"AUTH_SUCCESS"===e?s.a.createElement(Gt,{googleUser:this.state.googleUser}):"AUTH_IN_PROGRESS"===e?s.a.createElement(Ht,null):s.a.createElement(Bt,{onSignIn:this.onSignIn})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.renderView())}}]),t}(n.Component),Yt=Object(o.b)(function(e){return{lexon:e.lexon}},function(e){return{setUser:function(t){return e(g(t))}}})(Qt),Vt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(oe.a)(t).call(this,e))).state={readyToRedirect:!1},a.init=a.init.bind(Object(pe.a)(a)),a.initClient=a.initClient.bind(Object(pe.a)(a)),a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.setUser(e),"1"===e.slice(2,3)?zt().then(this.init):this.setState({readyToRedirect:!0})}},{key:"init",value:function(){window.gapi.load("client:auth2",this.initClient)}},{key:"initClient",value:function(){var e=this;Ot().then(function(t){e.onSignout(),e.setState({readyToRedirect:!0})}).catch(function(t){void 0===t&&e.setState({readyToRedirect:!0})})}},{key:"onSignout",value:function(){St()}},{key:"render",value:function(){return this.state.readyToRedirect?s.a.createElement(tt.a,{to:"/"}):null}}]),t}(n.Component),qt=Object(o.b)(function(e){return{lexon:e.lexon}},function(e){return{setUser:function(t){return e(g(t))}}})(Vt),Kt=(a(389),function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){return s.a.createElement(le.a,null,s.a.createElement(de.a,null,s.a.createElement(ue.a,{exact:!0,path:"/user/:id",component:qt}),s.a.createElement(ue.a,{path:"/",component:Yt})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(o.a,{store:$},s.a.createElement(ee.a,{i18n:ne},s.a.createElement(Kt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.02473e7a.chunk.js.map